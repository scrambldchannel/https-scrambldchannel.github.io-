
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://scrambldchannel.github.io/theme/stylesheet/style.min.css">

    <link id="dark-theme-style" rel="stylesheet" type="text/css"
          media="(prefers-color-scheme: dark)"
    href="https://scrambldchannel.github.io/theme/stylesheet/dark-theme.min.css">

    <link id="pygments-dark-theme" rel="stylesheet" type="text/css"
              media="(prefers-color-scheme: dark)"
          href="https://scrambldchannel.github.io/theme/pygments/monokai.min.css">
    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
              media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"
          href="https://scrambldchannel.github.io/theme/pygments/github.min.css">


  <link rel="stylesheet" type="text/css" href="https://scrambldchannel.github.io/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://scrambldchannel.github.io/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://scrambldchannel.github.io/theme/font-awesome/css/solid.css">





<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-161901975-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#333">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#333">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#333">

<meta name="author" content="Alexander" />
<meta name="description" content="A bit annoyed at finding myself having to re-learn a good workflow for setting up dev environments for Jupyter projects, I thought I&#39;d try to list my workflow as is and update as I improve so I can refer back after a hiatus." />
<meta name="keywords" content="anaconda, jupyter, python, ubuntu, linux">


<meta property="og:site_name" content="Code and Cricket"/>
<meta property="og:title" content="Anaconda and Jupyter Cheatsheet"/>
<meta property="og:description" content="A bit annoyed at finding myself having to re-learn a good workflow for setting up dev environments for Jupyter projects, I thought I&#39;d try to list my workflow as is and update as I improve so I can refer back after a hiatus."/>
<meta property="og:locale" content="en_GB"/>
<meta property="og:url" content="https://scrambldchannel.github.io/jupyter-cheatsheet.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2019-08-26 11:59:00+02:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://scrambldchannel.github.io/author/alexander.html">
<meta property="article:section" content="docs"/>
<meta property="article:tag" content="anaconda"/>
<meta property="article:tag" content="jupyter"/>
<meta property="article:tag" content="python"/>
<meta property="article:tag" content="ubuntu"/>
<meta property="article:tag" content="linux"/>
<meta property="og:image" content="https://scrambldchannel.github.io/images/me_staring_into_the_trees.jpg">

  <title>Code and Cricket &ndash; Anaconda and Jupyter Cheatsheet</title>

</head>
<body >
  <aside>
    <div>
      <a href="https://scrambldchannel.github.io">
        <img src="https://scrambldchannel.github.io/images/me_staring_into_the_trees.jpg" alt="Code and Cricket" title="Code and Cricket">
      </a>

      <h1>
        <a href="https://scrambldchannel.github.io">Code and Cricket</a>
      </h1>

<p>Feverish scribblings on things like TM1, Python and cricket stats</p>

      <nav>
        <ul class="list">


              <li>
                <a target="/pages/about.html"
                   href="/pages/about.html">
                  About
                </a>
              </li>

        </ul>
      </nav>

      <ul class="social">
          <li>
            <a  class="sc-github" href="https://github.com/scrambldchannel" target="_blank">
              <i class="fab fa-github"></i>
            </a>
          </li>
          <li>
            <a  class="sc-linkedin" href="https://www.linkedin.com/in/alexander-sutcliffe-b56921166/" target="_blank">
              <i class="fab fa-linkedin"></i>
            </a>
          </li>
          <li>
            <a  class="sc-twitter" href="https://twitter.com/scrambldchannel" target="_blank">
              <i class="fab fa-twitter"></i>
            </a>
          </li>
      </ul>
    </div>

  </aside>
  <main>

    <nav>
      <a href="https://scrambldchannel.github.io">Home</a>

      <a href="/pages/about.html">About</a>


    </nav>

<article class="single">
  <header>
      
    <h1 id="jupyter-cheatsheet">Anaconda and Jupyter Cheatsheet</h1>
    <p>
      Posted on Mon 26 August 2019 in <a href="https://scrambldchannel.github.io/category/docs.html">docs</a>

    </p>
  </header>


  <div>
    <p>A bit annoyed at finding myself having to re-learn a good workflow for setting up dev environments for Jupyter projects, I thought I'd try to list my workflow as is and update as I improve so I can refer back after a hiatus.</p>
<h2>Which Conda? Or no Conda at all?</h2>
<p>Honestly, I fell into using Anaconda via a group project I joined a while back. I've used it sporadically since for stuff I want to do in Jupyter Notebooks. I've never really looked at alternatives (eg Miniconda, or using pip based solutions). For now, it's been nice to have a GUI, particularly on Windows, but on Linux I prefer to do stuff from the command line. That said, it's mostly meant I haven't had to think too much about it which has helped me get up and running. There is a good write up of what Conda is and isn't <a href="https://jakevdp.github.io/blog/2016/08/25/conda-myths-and-misconceptions/">here</a></p>
<h3>Installing Anaconda</h3>
<p>Just pull the latest installer from <a href="https://www.google.com" title="Download page for Anaconda">their website</a>. Download the appropriate bundle for your OS and architecture and follow the installation instructions. I am exclusively using the 3.7 distribution and don't have any legacy code I depend on for my projects.</p>
<p>Eg using Linux, wherever you've downloaded the installer(obviously full filename to match whatever you've downloaded):</p>
<div class="highlight"><pre><span></span>$ <span class="nb">source</span> ./Anaconda3-2019.07-Linux-x86_64.sh
</pre></div>


<p>I generally install it in the default location, i.e. an anaconda directory in ~/</p>
<h3>Managing Environments</h3>
<p>You can use the GUI (ie anaconda-navigator) but can do most things from the command line. I find the gui a bit clunky to be honest but it's nice to be able to fall back on it.</p>
<h4>List environments</h4>
<p>This will give you a list of environments this conda knows about.</p>
<div class="highlight"><pre><span></span>$ conda env list
<span class="c1"># conda environments:</span>
<span class="c1">#</span>
base                  *  /home/alex/anaconda3
<span class="o">[</span>...<span class="o">]</span>
$
</pre></div>


<h4>Create</h4>
<p>You probably want to create a new environment for a new project and install any relevant libraries within it.</p>
<div class="highlight"><pre><span></span>$ conda create -n testenv <span class="nv">python</span><span class="o">=</span><span class="m">3</span>.7 anaconda
</pre></div>


<h4>Activate</h4>
<p>Once you've created an environment, activate it install packages of interest. </p>
<div class="highlight"><pre><span></span>$ conda activate testenv
<span class="o">(</span>testenv<span class="o">)</span> $
</pre></div>


<h3>Installing libraries</h3>
<p>Libraries can be installed with either onda or pip. As a basic process, I search for them on conda first and install if available and install them via pip if not. </p>
<h4>Is it in the conda repos?</h4>
<p>Eg. this looks for a package and tells you it's available.</p>
<div class="highlight"><pre><span></span><span class="o">(</span>testenv<span class="o">)</span> $ conda search plotly
Loading channels: ...working... <span class="k">done</span>
<span class="c1"># Name                       Version           Build  Channel             </span>
plotly                        <span class="m">2</span>.0.15  py27h139127e_0  pkgs/main           
plotly                        <span class="m">2</span>.0.15  py35h43bf465_0  pkgs/main           
plotly                        <span class="m">2</span>.0.15  py36hd032def_0  pkgs/main
<span class="o">[</span>...<span class="o">]</span>
<span class="o">(</span>testenv<span class="o">)</span> $
</pre></div>


<h4>Great, install it from conda</h4>
<p>We don't need to look any further, just install it.</p>
<div class="highlight"><pre><span></span><span class="o">(</span>testenv<span class="o">)</span> $ conda install plotly
</pre></div>


<h5>It might not exist in the conda repo though</h5>
<p>If you get a response like this, it's not available in the conda distribution you have. </p>
<div class="highlight"><pre><span></span><span class="o">(</span>testenv<span class="o">)</span> $ conda search geoplotlib
Loading channels: <span class="k">done</span>
No match found <span class="k">for</span>: geoplotlib. Search: *geoplotlib*
<span class="o">[</span>...<span class="o">]</span>
<span class="o">(</span>testenv<span class="o">)</span> $
</pre></div>


<h5>Try installing via pip instead</h5>
<p>If it's a library that's available on PyPi, you should be able to install it by doing the following.</p>
<div class="highlight"><pre><span></span><span class="o">(</span>testenv<span class="o">)</span> $ pip install geoplotlib
Collecting geoplotlib
<span class="o">[</span>...<span class="o">]</span>
Successfully installed geoplotlib-0.3.2
<span class="o">(</span>testenv<span class="o">)</span> $
</pre></div>


<h4>Deactivate</h4>
<p>Once you are done fiddling with a given environment, you can deactivate it so that anything you do won't impact it.</p>
<div class="highlight"><pre><span></span><span class="o">(</span>testenv<span class="o">)</span> $ conda deactivate
$
</pre></div>


<h2>Managing Jupyter kernels and conda environments</h2>
<p>I find it useful to create a single conda environment to launch jupyter notebooks from and leverage the ability to let them run kernels from other environments offered by installing ipykernel.</p>
<h3>Install ipykernel in our new env</h3>
<p>This makes a kernel based on this environment available for environments running nb_conda_kernels.</p>
<div class="highlight"><pre><span></span><span class="o">(</span>testenv<span class="o">)</span> $ conda install ipykernel
</pre></div>


<h3>Create the notebook env</h3>
<p>To launch our notebook server, we want to create a separate env.</p>
<div class="highlight"><pre><span></span>$ conda create -n notebook <span class="nv">python</span><span class="o">=</span><span class="m">3</span>.7 anaconda
</pre></div>


<h4>Activate the notebook env and install nb_conda_kernels</h4>
<p>Activate the new notebook env</p>
<div class="highlight"><pre><span></span>$ conda activate notebook
<span class="o">(</span>notebook<span class="o">)</span> $ 
</pre></div>


<p>Install nb_conda_kernels</p>
<div class="highlight"><pre><span></span>$ conda install nb_conda_kernels
</pre></div>


<h3>Launch a notebook server</h3>
<div class="highlight"><pre><span></span><span class="o">(</span>notebook<span class="o">)</span> $ jupyter notebook
</pre></div>


<h4>Open the notebook base url in your browser</h4>
<p>Eg navigate to <a href="http://localhost:8888" title="your (probable) local server url">http://localhost:8888</a></p>
<p>You should now be able to create a new notebook using a kernel from your new environment. From there you should be able to import all the libraries you've installed into the current environment from the running kernel.</p>
<h2>Using Notebooks</h2>
<p>A few notes on use of notebooks themselves.</p>
<h3>Useful key bindings</h3>
<p>Ones I most for navigation.</p>
<h4>Command Mode</h4>
<table>
<thead>
<tr>
<th align="left">Action</th>
<th align="left">Binding</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Enter</td>
<td align="left">enter edit mode</td>
</tr>
<tr>
<td align="left">Shift-Enter</td>
<td align="left">run, select below</td>
</tr>
<tr>
<td align="left">Ctrl-Enter</td>
<td align="left">run</td>
</tr>
<tr>
<td align="left">Alt-Enter</td>
<td align="left">run, insert below</td>
</tr>
<tr>
<td align="left">Y</td>
<td align="left">to code</td>
</tr>
<tr>
<td align="left">M</td>
<td align="left">to markdown</td>
</tr>
</tbody>
</table>
<h4>Edit Mode</h4>
<table>
<thead>
<tr>
<th align="left">Action</th>
<th align="left">Binding</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Esc</td>
<td align="left">Enter command mode</td>
</tr>
<tr>
<td align="left">Shift-Enter</td>
<td align="left">run, select below</td>
</tr>
<tr>
<td align="left">Ctrl-Enter</td>
<td align="left">run</td>
</tr>
<tr>
<td align="left">Alt-Enter</td>
<td align="left">run, insert below</td>
</tr>
<tr>
<td align="left">Ctrl-S</td>
<td align="left">Save and checkpoint</td>
</tr>
</tbody>
</table>
<h3>Using with Git</h3>
<h4>Repo setup</h4>
<p>I created a new empty repo on Github and cloned that locally and work there on notebook projects, committing completed projects back to Github and potentially moving bigger projects into their own repo or publishing certain notebooks to this blog.</p>
<h4>Gitignore</h4>
<p>I include this to ensure no checkpoints are included, useful if you iterate on the notebooks in the repo and don't want to inadvertently push private details back to Github. If you use the standard Python .gitignore from Github this will be included automatically.</p>
<div class="highlight"><pre><span></span><span class="na">.ipynb_checkpoints</span>
</pre></div>


<h3>Securing private info</h3>
<p>I.e. don't include things like private API keys as declared variables in any notebooks you end up publishing on Github.</p>
<h4>Read from a config file</h4>
<p>Perhaps this isn't the best approach but it works ok for now. I create a simple notebook_config.json file containing something like this:</p>
<div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;SECRET_API_KEY&quot;</span> <span class="p">:</span> <span class="s2">&quot;verysecret&quot;</span>
<span class="p">}</span>
</pre></div>


<p>I can then read it in from the notebook:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;notebook_config.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">config_file</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>

<span class="n">key</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;SECRET_API_KEY&#39;</span><span class="p">]</span>
</pre></div>


<p>Add this to .gitignore</p>
<div class="highlight"><pre><span></span><span class="n">notebook_config</span><span class="p">.</span><span class="n">json</span>
</pre></div>


<h4>Reading in local data</h4>
<p>I find it helps to create a folder for datasets and load them in a standard(ish) way. For example:</p>
<div class="highlight"><pre><span></span><span class="n">dataset_path</span> <span class="o">=</span> <span class="s2">&quot;../datasets/&quot;</span>
<span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">dataset_path</span> <span class="o">+</span> <span class="s1">&#39;Berlin_AL9-AL9.shp&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
</pre></div>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://scrambldchannel.github.io/tag/anaconda.html">anaconda</a>
      <a href="https://scrambldchannel.github.io/tag/jupyter.html">jupyter</a>
      <a href="https://scrambldchannel.github.io/tag/python.html">python</a>
      <a href="https://scrambldchannel.github.io/tag/ubuntu.html">ubuntu</a>
      <a href="https://scrambldchannel.github.io/tag/linux.html">linux</a>
    </p>
  </div>





</article>

    <footer>
<p>
  &copy;  2020 - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>
</p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
  <span class="footer-separator">|</span>
  Switch to the <a href="javascript:void(0)" onclick="theme.switch(`dark`)">dark</a> | <a href="javascript:void(0)" onclick="theme.switch(`light`)">light</a> | <a href="javascript:void(0)" onclick="theme.switch(`browser`)">browser</a> theme
  <script id="dark-theme-script"
          src="https://scrambldchannel.github.io/theme/dark-theme/dark-theme.min.js"
          data-enable-auto-detect-theme="True"
          data-default-theme="light"
          type="text/javascript">
  </script>
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
           src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Code and Cricket ",
  "url" : "https://scrambldchannel.github.io",
  "image": "https://scrambldchannel.github.io/images/me_staring_into_the_trees.jpg",
  "description": ""
}
</script>


</body>
</html>